(self.webpackChunkdocusaurus_2_website=self.webpackChunkdocusaurus_2_website||[]).push([[8347],{98448:function(e,t,n){"use strict";var a=n(67294);t.Z=function(e){var t=e.children,n=e.hidden,i=e.className;return a.createElement("div",{role:"tabpanel",hidden:n,className:i},t)}},12168:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var a=n(67294),i=n(90050),o=n(86010),r="tabItem_1uMI",s="tabItemActive_2DSg";var l=37,d=39;var p=function(e){var t=e.lazy,n=e.block,p=e.defaultValue,c=e.values,u=e.groupId,m=e.className,h=(0,i.Z)(),k=h.tabGroupChoices,g=h.setTabGroupChoices,w=(0,a.useState)(p),v=w[0],N=w[1],f=a.Children.toArray(e.children),b=[];if(null!=u){var C=k[u];null!=C&&C!==v&&c.some((function(e){return e.value===C}))&&N(C)}var y=function(e){var t=e.currentTarget,n=b.indexOf(t),a=c[n].value;N(a),null!=u&&(g(u,a),setTimeout((function(){var e,n,a,i,o,r,l,d;(e=t.getBoundingClientRect(),n=e.top,a=e.left,i=e.bottom,o=e.right,r=window,l=r.innerHeight,d=r.innerWidth,n>=0&&o<=d&&i<=l&&a>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(s),setTimeout((function(){return t.classList.remove(s)}),2e3))}),150))},x=function(e){var t,n;switch(e.keyCode){case d:var a=b.indexOf(e.target)+1;n=b[a]||b[0];break;case l:var i=b.indexOf(e.target)-1;n=b[i]||b[b.length-1]}null==(t=n)||t.focus()};return a.createElement("div",{className:"tabs-container"},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},m)},c.map((function(e){var t=e.value,n=e.label;return a.createElement("li",{role:"tab",tabIndex:v===t?0:-1,"aria-selected":v===t,className:(0,o.Z)("tabs__item",r,{"tabs__item--active":v===t}),key:t,ref:function(e){return b.push(e)},onKeyDown:x,onFocus:y,onClick:y},n)}))),t?(0,a.cloneElement)(f.filter((function(e){return e.props.value===v}))[0],{className:"margin-vert--md"}):a.createElement("div",{className:"margin-vert--md"},f.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==v})}))))}},22713:function(e,t,n){"use strict";var a=(0,n(67294).createContext)(void 0);t.Z=a},90050:function(e,t,n){"use strict";var a=n(67294),i=n(22713);t.Z=function(){var e=(0,a.useContext)(i.Z);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},52227:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a={};n.r(a),n.d(a,{ButtonExample:function(){return r}});var i=n(67294),o=n(22122),r=function(e){return i.createElement("button",(0,o.Z)({},e,{style:Object.assign({backgroundColor:"white",border:"solid red",borderRadius:20,padding:10,cursor:"pointer"},e.style)}))},s=Object.assign({React:i},i,a)},15487:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return c},metadata:function(){return u},toc:function(){return m},default:function(){return k}});var a=n(22122),i=n(19756),o=(n(67294),n(3905)),r=n(12168),s=n(98448),l=n(42696),d=n(4226),p=["components"],c={id:"crowdin",title:"i18n - Using Crowdin",slug:"/i18n/crowdin"},u={unversionedId:"i18n/crowdin",id:"version-2.0.0-beta.0/i18n/crowdin",isDocsHomePage:!1,title:"i18n - Using Crowdin",description:"The i18n system of Docusaurus is decoupled from any translation software.",source:"@site/versioned_docs/version-2.0.0-beta.0/i18n/i18n-crowdin.mdx",sourceDirName:"i18n",slug:"/i18n/crowdin",permalink:"/zh-CN/docs/i18n/crowdin",editUrl:"https://crowdin.com/project/docusaurus-v2/zh-CN",version:"2.0.0-beta.0",lastUpdatedBy:"S\xe9bastien Lorber",lastUpdatedAt:1620828435,formattedLastUpdatedAt:"2021/5/12",frontMatter:{id:"crowdin",title:"i18n - Using Crowdin",slug:"/i18n/crowdin"},sidebar:"version-2.0.0-beta.0/docs",previous:{title:"i18n - Using git",permalink:"/zh-CN/docs/i18n/git"},next:{title:"Plugins",permalink:"/zh-CN/docs/using-plugins"}},m=[{value:"Crowdin overview",id:"crowdin-overview",children:[]},{value:"Crowdin tutorial",id:"crowdin-tutorial",children:[{value:"Prepare the Docusaurus site",id:"prepare-the-docusaurus-site",children:[]},{value:"Create a Crowdin project",id:"create-a-crowdin-project",children:[]},{value:"Create the Crowdin configuration",id:"create-the-crowdin-configuration",children:[]},{value:"Install the Crowdin CLI",id:"install-the-crowdin-cli",children:[]},{value:"Upload the sources",id:"upload-the-sources",children:[]},{value:"Translate the sources",id:"translate-the-sources",children:[]},{value:"Download the translations",id:"download-the-translations",children:[]},{value:"Automate with CI",id:"automate-with-ci",children:[]}]},{value:"Advanced Crowdin topics",id:"advanced-crowdin-topics",children:[{value:"MDX",id:"mdx",children:[]},{value:"Docs versioning",id:"docs-versioning",children:[]},{value:"Multi-instance plugins",id:"multi-instance-plugins",children:[]},{value:"Maintaining your site",id:"maintaining-your-site",children:[]},{value:"VCS (Git) integrations",id:"vcs-git-integrations",children:[]},{value:"In-Context localization",id:"in-context-localization",children:[]},{value:"Localize edit urls",id:"localize-edit-urls",children:[]},{value:"Example configuration",id:"example-configuration",children:[]}]}],h={toc:m};function k(e){var t=e.components,c=(0,i.Z)(e,p);return(0,o.kt)("wrapper",(0,a.Z)({},h,c,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The i18n system of Docusaurus is ",(0,o.kt)("strong",{parentName:"p"},"decoupled from any translation software"),"."),(0,o.kt)("p",null,"You can integrate Docusaurus with the ",(0,o.kt)("strong",{parentName:"p"},"tools and SaaS of your choice"),", as long as you put the ",(0,o.kt)("strong",{parentName:"p"},"translation files at the correct location"),"."),(0,o.kt)("p",null,"We document the usage of ",(0,o.kt)("a",{parentName:"p",href:"https://crowdin.com/"},"Crowdin"),", as ",(0,o.kt)("strong",{parentName:"p"},"one")," possible ",(0,o.kt)("strong",{parentName:"p"},"integration example"),"."),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"This is ",(0,o.kt)("strong",{parentName:"p"},"not an endorsement of Crowdin")," as the unique choice to translate a Docusaurus site, but it is successfully used by Facebook to translate documentation projects such as ",(0,o.kt)("a",{parentName:"p",href:"https://jestjs.io/"},"Jest"),", ",(0,o.kt)("a",{parentName:"p",href:"https://docusaurus.io/"},"Docusaurus")," and ",(0,o.kt)("a",{parentName:"p",href:"https://reasonml.github.io/"},"ReasonML"),"."),(0,o.kt)("p",{parentName:"div"},"Refer to the ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"https://support.crowdin.com/"},"Crowdin documentation"))," and ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"mailto:support@crowdin.com"},"Crowdin support"))," for help."))),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Use this ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"https://github.com/facebook/docusaurus/discussions/4052"},"community-driven GitHub issue"))," to discuss anything related to Docusaurus + Crowdin."))),(0,o.kt)("h2",{id:"crowdin-overview"},"Crowdin overview"),(0,o.kt)("p",null,"Crowdin is a translation SaaS, offering a ",(0,o.kt)("a",{parentName:"p",href:"https://crowdin.com/page/open-source-project-setup-request"},"free plan for open-source projects"),"."),(0,o.kt)("p",null,"We recommend the following translation workflow:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Upload sources")," to Crowdin (untranslated files)"),(0,o.kt)("li",{parentName:"ul"},"Use Crowdin to ",(0,o.kt)("strong",{parentName:"li"},"translate the content")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Download translations")," from Crowdin (localized translation files)")),(0,o.kt)("p",null,"Crowdin provides a ",(0,o.kt)("a",{parentName:"p",href:"https://support.crowdin.com/cli-tool/"},"CLI")," to ",(0,o.kt)("strong",{parentName:"p"},"upload sources")," and ",(0,o.kt)("strong",{parentName:"p"},"download translations"),", allowing you to automate the translation process."),(0,o.kt)("p",null,"The ",(0,o.kt)("a",{parentName:"p",href:"https://support.crowdin.com/configuration-file/"},(0,o.kt)("inlineCode",{parentName:"a"},"crowdin.yml")," configuration file")," is convenient for Docusaurus, and permits to ",(0,o.kt)("strong",{parentName:"p"},"download the localized translation files at the expected location")," (in ",(0,o.kt)("inlineCode",{parentName:"p"},"i18n/<locale>/.."),")."),(0,o.kt)("p",null,"Read the ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"https://support.crowdin.com/"},"official documentation"))," to know more about advanced features and different translation workflows."),(0,o.kt)("h2",{id:"crowdin-tutorial"},"Crowdin tutorial"),(0,o.kt)("p",null,"This is a walk-through of using Crowdin to translate a newly initialized English Docusaurus website into French, and assume you already followed the ",(0,o.kt)("a",{parentName:"p",href:"/zh-CN/docs/i18n/tutorial"},"i18n tutorial"),"."),(0,o.kt)("p",null,"The end result can be seen at ",(0,o.kt)("a",{parentName:"p",href:"https://docusaurus-crowdin-example.netlify.app/"},"docusaurus-crowdin-example.netlify.app")," (",(0,o.kt)("a",{parentName:"p",href:"https://github.com/slorber/docusaurus-crowdin-example"},"repository"),")."),(0,o.kt)("h3",{id:"prepare-the-docusaurus-site"},"Prepare the Docusaurus site"),(0,o.kt)("p",null,"Initialize a new Docusaurus site:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npx @docusaurus/init@latest init website classic\n")),(0,o.kt)("p",null,"Add the site configuration for the French language:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="docusaurus.config.js"',title:'"docusaurus.config.js"'},"module.exports = {\n  i18n: {\n    defaultLocale: 'en',\n    locales: ['en', 'fr'],\n  },\n  themeConfig: {\n    navbar: {\n      items: [\n        // ...\n        {\n          type: 'localeDropdown',\n          position: 'left',\n        },\n        // ...\n      ],\n    },\n  },\n  // ...\n};\n")),(0,o.kt)("p",null,"Translate the homepage:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="src/pages/index.js"',title:'"src/pages/index.js"'},"import React from 'react';\nimport Translate from '@docusaurus/Translate';\nimport Layout from '@theme/Layout';\n\nexport default function Home() {\n  return (\n    <Layout>\n      <h1 style={{margin: 20}}>\n        <Translate description=\"The homepage main heading\">\n          Welcome to my Docusaurus translated site!\n        </Translate>\n      </h1>\n    </Layout>\n  );\n}\n")),(0,o.kt)("h3",{id:"create-a-crowdin-project"},"Create a Crowdin project"),(0,o.kt)("p",null,"Sign up on ",(0,o.kt)("a",{parentName:"p",href:"https://crowdin.com/"},"Crowdin"),", and create a project."),(0,o.kt)("p",null,"Use English as source language, and French as target language."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Create a Crowdin project with english as source language, and french as target language",src:n(48620).Z})),(0,o.kt)("p",null,"Your project is created, but it is empty for now. We will upload the files to translate in the next steps."),(0,o.kt)("h3",{id:"create-the-crowdin-configuration"},"Create the Crowdin configuration"),(0,o.kt)("p",null,"This configuration (",(0,o.kt)("a",{parentName:"p",href:"https://support.crowdin.com/configuration-file/"},"doc"),") provides a mapping for the Crowdin CLI to understand:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Where to find the source files to upload (JSON and Markdown)"),(0,o.kt)("li",{parentName:"ul"},"Where to download the files after translation (in ",(0,o.kt)("inlineCode",{parentName:"li"},"i18n/<locale>"),")")),(0,o.kt)("p",null,"Create ",(0,o.kt)("inlineCode",{parentName:"p"},"crowdin.yml")," in ",(0,o.kt)("inlineCode",{parentName:"p"},"website"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yml",metastring:'title="crowdin.yml"',title:'"crowdin.yml"'},"project_id: '123456'\napi_token_env: 'CROWDIN_PERSONAL_TOKEN'\npreserve_hierarchy: true\nfiles: [\n    # JSON translation files\n    {\n      source: '/i18n/en/**/*',\n      translation: '/i18n/%two_letters_code%/**/%original_file_name%',\n    },\n    # Docs Markdown files\n    {\n      source: '/docs/**/*',\n      translation: '/i18n/%two_letters_code%/docusaurus-plugin-content-docs/current/**/%original_file_name%',\n    },\n    # Blog Markdown files\n    {\n      source: '/blog/**/*',\n      translation: '/i18n/%two_letters_code%/docusaurus-plugin-content-blog/**/%original_file_name%',\n    },\n  ]\n")),(0,o.kt)("p",null,"Crowdin has its own syntax for declaring source/translation paths:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"**/*"),": everything in a subfolder"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"%two_letters_code%"),": the 2-letters variant of Crowdin target languages (",(0,o.kt)("inlineCode",{parentName:"li"},"fr")," in our case)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"**/%original_file_name%"),": the translations will preserve the original folder/file hierarchy")),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"The Crowdin CLI warnings are not always easy to understand."),(0,o.kt)("p",{parentName:"div"},"We advise to:"),(0,o.kt)("ul",{parentName:"div"},(0,o.kt)("li",{parentName:"ul"},"change one thing at a time"),(0,o.kt)("li",{parentName:"ul"},"re-upload sources after any configuration change"),(0,o.kt)("li",{parentName:"ul"},"use paths starting with ",(0,o.kt)("inlineCode",{parentName:"li"},"/")," (",(0,o.kt)("inlineCode",{parentName:"li"},"./")," does not work)"),(0,o.kt)("li",{parentName:"ul"},"avoid fancy globbing patterns like ",(0,o.kt)("inlineCode",{parentName:"li"},"/docs/**/*.(md|mdx)")," (does not work)")))),(0,o.kt)("h4",{id:"access-token"},"Access token"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"api_token_env")," attribute defines the ",(0,o.kt)("strong",{parentName:"p"},"env variable name")," read by the Crowdin CLI."),(0,o.kt)("p",null,"You can obtain a ",(0,o.kt)("inlineCode",{parentName:"p"},"Personal Access Token")," on ",(0,o.kt)("a",{parentName:"p",href:"https://crowdin.com/settings#api-key"},"your personal profile page"),"."),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"You can keep the default value ",(0,o.kt)("inlineCode",{parentName:"p"},"CROWDIN_PERSONAL_TOKEN"),", and set this environment variable and on your computer and on the CI server to the generated access token."))),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"A Personal Access Tokens grant ",(0,o.kt)("strong",{parentName:"p"},"read-write access to all your Crowdin projects"),"."),(0,o.kt)("p",{parentName:"div"},"You should ",(0,o.kt)("strong",{parentName:"p"},"not commit")," it, and it may be a good idea to create a dedicated ",(0,o.kt)("strong",{parentName:"p"},"Crowdin profile for your company")," instead of using a personal account."))),(0,o.kt)("h4",{id:"other-configuration-fields"},"Other configuration fields"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"project_id"),": can be hardcoded, and is found on ",(0,o.kt)("inlineCode",{parentName:"li"},"https://crowdin.com/project/<MY_PROJECT_NAME>/settings#api")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"preserve_hierarchy"),": preserve the folder's hierarchy of your docs on Crowdin UI instead of flattening everything")),(0,o.kt)("h3",{id:"install-the-crowdin-cli"},"Install the Crowdin CLI"),(0,o.kt)("p",null,"This tutorial use the CLI in version ",(0,o.kt)("inlineCode",{parentName:"p"},"3.5.2"),", but we expect ",(0,o.kt)("inlineCode",{parentName:"p"},"3.x")," releases to keep working."),(0,o.kt)("p",null,"Install the Crowdin CLI as a NPM package to your Docusaurus site:"),(0,o.kt)(r.Z,{defaultValue:"npm",groupId:"npm2yarn",values:[{label:"npm",value:"npm"},{label:"Yarn",value:"yarn"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"npm",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install @crowdin/cli@3\n"))),(0,o.kt)(s.Z,{value:"yarn",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add @crowdin/cli@3\n")))),(0,o.kt)("p",null,"Add a ",(0,o.kt)("inlineCode",{parentName:"p"},"crowdin")," script:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="package.json"',title:'"package.json"'},'{\n  "scripts": {\n    "crowdin": "crowdin"\n  }\n}\n')),(0,o.kt)("p",null,"Test that you can run the Crowdin CLI:"),(0,o.kt)(r.Z,{defaultValue:"npm",groupId:"npm2yarn",values:[{label:"npm",value:"npm"},{label:"Yarn",value:"yarn"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"npm",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm run crowdin -- --version\n"))),(0,o.kt)(s.Z,{value:"yarn",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn run crowdin -- --version\n")))),(0,o.kt)("p",null,"Set the ",(0,o.kt)("inlineCode",{parentName:"p"},"CROWDIN_PERSONAL_TOKEN")," env variable on your computer, to allow the CLI to authenticate with the Crowdin API."),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Temporarily, you can hardcode your personal token in ",(0,o.kt)("inlineCode",{parentName:"p"},"crowdin.yml")," with ",(0,o.kt)("inlineCode",{parentName:"p"},"api_token: 'MY-TOKEN'"),"."))),(0,o.kt)("h3",{id:"upload-the-sources"},"Upload the sources"),(0,o.kt)("p",null,"Generate the JSON translation files for the default language in ",(0,o.kt)("inlineCode",{parentName:"p"},"website/i18n/en"),":"),(0,o.kt)(r.Z,{defaultValue:"npm",groupId:"npm2yarn",values:[{label:"npm",value:"npm"},{label:"Yarn",value:"yarn"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"npm",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm run write-translations\n"))),(0,o.kt)(s.Z,{value:"yarn",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn run write-translations\n")))),(0,o.kt)("p",null,"Upload all the JSON and Markdown translation files:"),(0,o.kt)(r.Z,{defaultValue:"npm",groupId:"npm2yarn",values:[{label:"npm",value:"npm"},{label:"Yarn",value:"yarn"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"npm",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm run crowdin upload\n"))),(0,o.kt)(s.Z,{value:"yarn",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn run crowdin upload\n")))),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Crowdin CLI uploading Docusaurus source files",src:n(26593).Z})),(0,o.kt)("p",null,"Your source files are now visible on the Crowdin interface: ",(0,o.kt)("inlineCode",{parentName:"p"},"https://crowdin.com/project/<MY_PROJECT_NAME>/settings#files")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Crowdin UI showing Docusaurus source files",src:n(69878).Z})),(0,o.kt)("h3",{id:"translate-the-sources"},"Translate the sources"),(0,o.kt)("p",null,"On ",(0,o.kt)("inlineCode",{parentName:"p"},"https://crowdin.com/project/<MY_PROJECT_NAME>"),", click on the French target language."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Crowdin UI showing French translation files",src:n(95285).Z})),(0,o.kt)("p",null,"Translate some Markdown files."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Crowdin UI to translate a Markdown file",src:n(29217).Z})),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Use ",(0,o.kt)("inlineCode",{parentName:"p"},"Hide String")," to make sure translators ",(0,o.kt)("strong",{parentName:"p"},"don't translate things that should not be"),":"),(0,o.kt)("ul",{parentName:"div"},(0,o.kt)("li",{parentName:"ul"},"Frontmatter: ",(0,o.kt)("inlineCode",{parentName:"li"},"id"),", ",(0,o.kt)("inlineCode",{parentName:"li"},"slug"),", ",(0,o.kt)("inlineCode",{parentName:"li"},"tags")," ..."),(0,o.kt)("li",{parentName:"ul"},"Admonitions: ",(0,o.kt)("inlineCode",{parentName:"li"},":::"),", ",(0,o.kt)("inlineCode",{parentName:"li"},":::note"),", ",(0,o.kt)("inlineCode",{parentName:"li"},":::tip")," ...")),(0,o.kt)("p",{parentName:"div"},(0,o.kt)("img",{alt:"Crowdin UI hide string",src:n(54511).Z})))),(0,o.kt)("p",null,"Translate some JSON files."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Crowdin UI to translate a JSON file",src:n(59994).Z})),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"The ",(0,o.kt)("inlineCode",{parentName:"p"},"description")," attribute of JSON translation files is visible on Crowdin to help translate the strings."))),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"https://support.crowdin.com/pre-translation-via-machine/"},"Pre-translate"))," your site, and ",(0,o.kt)("strong",{parentName:"p"},"fix pre-translation mistakes manually")," (enable the Global Translation Memory in settings first)."),(0,o.kt)("p",{parentName:"div"},"Use the ",(0,o.kt)("inlineCode",{parentName:"p"},"Hide String")," feature first, as Crowdin is pre-translating things too optimistically."))),(0,o.kt)("h3",{id:"download-the-translations"},"Download the translations"),(0,o.kt)("p",null,"Use the Crowdin CLI to download the translated JSON and Markdown files."),(0,o.kt)(r.Z,{defaultValue:"npm",groupId:"npm2yarn",values:[{label:"npm",value:"npm"},{label:"Yarn",value:"yarn"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"npm",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm run crowdin download\n"))),(0,o.kt)(s.Z,{value:"yarn",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn run crowdin download\n")))),(0,o.kt)("p",null,"The translated content should be downloaded in ",(0,o.kt)("inlineCode",{parentName:"p"},"i18n/fr"),"."),(0,o.kt)("p",null,"Start your site on the French locale:"),(0,o.kt)(r.Z,{defaultValue:"npm",groupId:"npm2yarn",values:[{label:"npm",value:"npm"},{label:"Yarn",value:"yarn"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"npm",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm run start -- --locale fr\n"))),(0,o.kt)(s.Z,{value:"yarn",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn run start -- --locale fr\n")))),(0,o.kt)("p",null,"Make sure that your website is now translated in French at ",(0,o.kt)("inlineCode",{parentName:"p"},"http://localhost:3000/fr/"),"."),(0,o.kt)("h3",{id:"automate-with-ci"},"Automate with CI"),(0,o.kt)("p",null,"We will configure the CI to ",(0,o.kt)("strong",{parentName:"p"},"download the Crowdin translations at build time"),", and keep them outside of Git."),(0,o.kt)("p",null,"Add ",(0,o.kt)("inlineCode",{parentName:"p"},"website/i18n")," to ",(0,o.kt)("inlineCode",{parentName:"p"},".gitignore"),"."),(0,o.kt)("p",null,"Set the ",(0,o.kt)("inlineCode",{parentName:"p"},"CROWDIN_PERSONAL_TOKEN")," env variable on your CI."),(0,o.kt)("p",null,"Create a npm script to ",(0,o.kt)("inlineCode",{parentName:"p"},"sync")," Crowdin (extract sources, upload sources, download translations):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="package.json"',title:'"package.json"'},'{\n  "scripts": {\n    "crowdin:sync": "docusaurus write-translations && crowdin upload && crowdin download"\n  }\n}\n')),(0,o.kt)("p",null,"Call the ",(0,o.kt)("inlineCode",{parentName:"p"},"npm run crowdin:sync")," script in your CI, just before building the Docusaurus site."),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Keep your deploy-previews fast: don't download translations, and use ",(0,o.kt)("inlineCode",{parentName:"p"},"npm run build -- --locale en")," for feature branches."))),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Crowdin does not support well multiple concurrent uploads/downloads: it is preferable to only include translations to your production deployment, and keep deploy previews untranslated."))),(0,o.kt)("h2",{id:"advanced-crowdin-topics"},"Advanced Crowdin topics"),(0,o.kt)("h3",{id:"mdx"},"MDX"),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Pay special attention to the JSX fragments in MDX documents!"))),(0,o.kt)("p",null,"Crowdin ",(0,o.kt)("strong",{parentName:"p"},"does not support officially MDX"),", but they added ",(0,o.kt)("strong",{parentName:"p"},"support for the ",(0,o.kt)("inlineCode",{parentName:"strong"},".mdx")," extension"),", and interpret such files as Markdown (instead of plain text)."),(0,o.kt)("h4",{id:"mdx-problems"},"MDX problems"),(0,o.kt)("p",null,"Crowdin thinks the JSX syntax is embedded HTML, and can mess-up with the JSX markup when you download the translations, leading to a site that fails to build due to invalid JSX."),(0,o.kt)("p",null,"Simple JSX fragments using simple string props like ",(0,o.kt)("inlineCode",{parentName:"p"},'<Username name="Sebastien"/>')," will work fine."),(0,o.kt)("p",null,"More complex JSX fragments using object/array props like ",(0,o.kt)("inlineCode",{parentName:"p"},'<User person={{name: "Sebastien"}}/>')," are more likely to fail due to a syntax that does not look like HTML."),(0,o.kt)("h4",{id:"mdx-solutions"},"MDX solutions"),(0,o.kt)("p",null,"We recommend moving the complex embedded JSX code as separate standalone components."),(0,o.kt)("p",null,"We also added a ",(0,o.kt)("inlineCode",{parentName:"p"},"mdx-code-block")," escape hatch syntax:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"# How to deploy Docusaurus\n\nTo deploy Docusaurus, run the following command:\n\n````mdx-code-block\nimport Tabs from '@theme/Tabs';\n\nimport TabItem from '@theme/TabItem';\n\n<Tabs\n  defaultValue=\"bash\"\n  values={[\n    { label: 'Bash', value: 'bash' },\n    { label: 'Windows', value: 'windows' }\n]}>\n  <TabItem value=\"bash\">\n\n  ```bash\n  GIT_USER=<GITHUB_USERNAME> yarn deploy\n  ```\n\n  </TabItem>\n  <TabItem value=\"windows\">\n\n  ```batch\n  cmd /C \"set \"GIT_USER=<GITHUB_USERNAME>\" && yarn deploy\"\n  ```\n\n  </TabItem>\n</Tabs>\n````\n")),(0,o.kt)("p",null,"This will:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"be interpreted by Crowdin as code blocks (and not mess-up with the markup on download)"),(0,o.kt)("li",{parentName:"ul"},"be interpreted by Docusaurus as regular JSX (as if it was not wrapped by any code block)"),(0,o.kt)("li",{parentName:"ul"},"unfortunately opt-out of MDX tooling (IDE syntax highlighting, Prettier...)")),(0,o.kt)("h3",{id:"docs-versioning"},"Docs versioning"),(0,o.kt)("p",null,"Configure translation files for the ",(0,o.kt)("inlineCode",{parentName:"p"},"website/versioned_docs")," folder."),(0,o.kt)("p",null,"When creating a new version, the source strings will generally be quite similar to the current version (",(0,o.kt)("inlineCode",{parentName:"p"},"website/docs"),"), and you don't want to translate the new version docs again and again."),(0,o.kt)("p",null,"Crowdin provides a ",(0,o.kt)("inlineCode",{parentName:"p"},"Duplicate Strings")," setting."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Crowdin Duplicate Strings option setting",src:n(80619).Z})),(0,o.kt)("p",null,"We recommend using ",(0,o.kt)("inlineCode",{parentName:"p"},"Hide"),", but the ideal setting depends on how much your versions are different."),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Not using ",(0,o.kt)("inlineCode",{parentName:"p"},"Hide")," leads to a much larger amount of ",(0,o.kt)("inlineCode",{parentName:"p"},"source strings")," in quotas, and will affect the pricing."))),(0,o.kt)("h3",{id:"multi-instance-plugins"},"Multi-instance plugins"),(0,o.kt)("p",null,"You need to configure translation files for each plugin instance."),(0,o.kt)("p",null,"If you have a docs plugin instance with ",(0,o.kt)("inlineCode",{parentName:"p"},"id=ios"),", you will need to configure those source files as well"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"website/ios")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"website/ios_versioned_docs")," (if versioned)")),(0,o.kt)("h3",{id:"maintaining-your-site"},"Maintaining your site"),(0,o.kt)("p",null,"Sometimes, you will ",(0,o.kt)("strong",{parentName:"p"},"remove or rename a source file")," on Git, and Crowdin will display CLI warnings:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Crowdin CLI: download translation warning",src:n(82500).Z})),(0,o.kt)("p",null,"When your sources are refactored, you should use the Crowdin UI to ",(0,o.kt)("strong",{parentName:"p"},"update your Crowdin files manually"),":"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Crowdin UI: renaming a file",src:n(38076).Z})),(0,o.kt)("h3",{id:"vcs-git-integrations"},"VCS (Git) integrations"),(0,o.kt)("p",null,"Crowdin has multiple VCS integrations for ",(0,o.kt)("a",{parentName:"p",href:"https://support.crowdin.com/github-integration/"},"GitHub"),", GitLab, Bitbucket."),(0,o.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"We recommend avoiding them."))),(0,o.kt)("p",null,"It could have been helpful to be able to edit the translations in both Git and Crowdin, and have a ",(0,o.kt)("strong",{parentName:"p"},"bi-directional sync")," between the 2 systems."),(0,o.kt)("p",null,"In practice, ",(0,o.kt)("strong",{parentName:"p"},"it didn't work very reliably")," for a few reasons:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The Crowdin -> Git sync works fine (with a pull request)"),(0,o.kt)("li",{parentName:"ul"},"The Git -> Crowdin sync is manual (you have to press a button)"),(0,o.kt)("li",{parentName:"ul"},"The heuristics used by Crowdin to match existing Markdown translations to existing Markdown sources are not 100% reliable, and you have to verify the result on Crowdin UI after any sync from Git"),(0,o.kt)("li",{parentName:"ul"},"2 users concurrently editing on Git and Crowdin can lead to a translation loss"),(0,o.kt)("li",{parentName:"ul"},"It requires the ",(0,o.kt)("inlineCode",{parentName:"li"},"crowdin.yml")," file to be at the root of the repository")),(0,o.kt)("h3",{id:"in-context-localization"},"In-Context localization"),(0,o.kt)("p",null,"Crowdin has an ",(0,o.kt)("a",{parentName:"p",href:"https://support.crowdin.com/in-context-localization/"},"In-Context localization")," feature."),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Unfortunately, it does not work yet for technical reasons, but we have good hope it can be solved."),(0,o.kt)("p",{parentName:"div"},"Crowdin replaces markdown strings with technical ids such as ",(0,o.kt)("inlineCode",{parentName:"p"},"crowdin:id12345"),", but it does so too aggressively, including hidden strings, and mess-up with the frontmatter, admonitions, jsx..."))),(0,o.kt)("h3",{id:"localize-edit-urls"},"Localize edit urls"),(0,o.kt)("p",null,"When the user is browsing a page at ",(0,o.kt)("inlineCode",{parentName:"p"},"/fr/doc1"),", the edit button will link by default to the unlocalized doc at ",(0,o.kt)("inlineCode",{parentName:"p"},"website/docs/doc1.md"),"."),(0,o.kt)("p",null,"You may prefer the edit button to link to the Crowdin interface instead, and can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"editUrl")," function to customize the edit urls on a per-locale basis."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="docusaurus.config.js"',title:'"docusaurus.config.js"'},"const DefaultLocale = 'en';\n\nmodule.exports = {\n  presets: [\n    [\n      '@docusaurus/preset-classic',\n      {\n        docs: {\n          // highlight-start\n          editUrl: ({locale, versionDocsDirPath, docPath}) => {\n            // Link to Crowdin for French docs\n            if (locale !== DefaultLocale) {\n              return `https://crowdin.com/project/docusaurus-v2/${locale}`;\n            }\n            // Link to Github for English docs\n            return `https://github.com/facebook/docusaurus/edit/master/website/${versionDocsDirPath}/${docPath}`;\n          },\n          // highlight-end\n        },\n        blog: {\n          // highlight-start\n          editUrl: ({locale, blogDirPath, blogPath}) => {\n            if (locale !== DefaultLocale) {\n              return `https://crowdin.com/project/docusaurus-v2/${locale}`;\n            }\n            return `https://github.com/facebook/docusaurus/edit/master/website/${blogDirPath}/${blogPath}`;\n          },\n          // highlight-start\n        },\n      },\n    ],\n  ],\n};\n")),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"It is currently ",(0,o.kt)("strong",{parentName:"p"},"not possible to link to a specific file")," in Crowdin."))),(0,o.kt)("h3",{id:"example-configuration"},"Example configuration"),(0,o.kt)("p",null,"The ",(0,o.kt)("strong",{parentName:"p"},"Docusaurus v2 configuration file")," is a good example of using versioning and multi-instance:"),(0,o.kt)(d.Z,{className:"language-yaml",title:"crowdin.yml",mdxType:"CodeBlock"},l.Z.split("\n").map((function(e){return!e.startsWith("#")&&e})).filter(Boolean).join("\n")))}k.isMDXComponent=!0},42696:function(e,t){"use strict";t.Z='#\n# Your Crowdin credentials\n#\nproject_id: \'428890\'\napi_token_env: \'CROWDIN_PERSONAL_TOKEN\'\n# base_path: \'.\'\n# base_url: \'https://api.crowdin.com\'\n\n#\n# Choose file structure in Crowdin\n# e.g. true or false\n#\npreserve_hierarchy: true\n\n#\n# Files configuration\n#\nfiles:\n  [\n    {\n      source: \'/website/i18n/en/**/*\',\n      translation: \'/website/i18n/%two_letters_code%/**/%original_file_name%\',\n    },\n    {\n      source: \'/website/docs/**/*\',\n      translation: \'/website/i18n/%two_letters_code%/docusaurus-plugin-content-docs/current/**/%original_file_name%\',\n    },\n    {\n      source: \'/website/community/**/*\',\n      translation: \'/website/i18n/%two_letters_code%/docusaurus-plugin-content-docs-community/current/**/%original_file_name%\',\n    },\n    {\n      source: \'/website/versioned_docs/**/*\',\n      translation: \'/website/i18n/%two_letters_code%/docusaurus-plugin-content-docs/**/%original_file_name%\',\n    },\n    {\n      source: \'/website/blog/**/*\',\n      translation: \'/website/i18n/%two_letters_code%/docusaurus-plugin-content-blog/**/%original_file_name%\',\n    },\n    {\n      source: \'/website/src/pages/**/*\',\n      translation: \'/website/i18n/%two_letters_code%/docusaurus-plugin-content-pages/**/%original_file_name%\',\n      ignore: [\'/**/*.js\', \'/**/*.jsx\', \'/**/*.ts\', \'/**/*.tsx\', \'/**/*.css\'],\n    },\n  ]\n#\n# Source files filter\n# e.g. "/resources/en/*.json"\n#\n#"source" : "/website/docs/**/*.md",\n#\n# Where translations will be placed\n# e.g. "/resources/docs/%two_letters_code%/%original_file_name%"\n#\n#"translation" : "/website/i18n/%language%/docs/current/%original_file_name%",\n#\n# Files or directories for ignore\n# e.g. ["/**/?.txt", "/**/[0-9].txt", "/**/*\\?*.txt"]\n#\n#"ignore" : [],\n#\n# The dest allows you to specify a file name in Crowdin\n# e.g. "/messages.json"\n#\n#"dest" : "",\n#\n# File type\n# e.g. "json"\n#\n#"type" : "",\n#\n# The parameter "update_option" is optional. If it is not set, after the files update the translations for changed strings will be removed. Use to fix typos and for minor changes in the source strings\n# e.g. "update_as_unapproved" or "update_without_changes"\n#\n#"update_option" : "",\n#\n# Start block (for XML only)\n#\n#\n# Defines whether to translate tags attributes.\n# e.g. 0 or 1  (Default is 1)\n#\n# "translate_attributes" : 1,\n#\n# Defines whether to translate texts placed inside the tags.\n# e.g. 0 or 1 (Default is 1)\n#\n# "translate_content" : 1,\n#\n# This is an array of strings, where each item is the XPaths to DOM element that should be imported\n# e.g. ["/content/text", "/content/text[@value]"]\n#\n# "translatable_elements" : [],\n#\n# Defines whether to split long texts into smaller text segments\n# e.g. 0 or 1 (Default is 1)\n#\n# "content_segmentation" : 1,\n#\n# End block (for XML only)\n#\n#\n# Start .properties block\n#\n#\n# Defines whether single quote should be escaped by another single quote or backslash in exported translations\n# e.g. 0 or 1 or 2 or 3 (Default is 3)\n# 0 - do not escape single quote;\n# 1 - escape single quote by another single quote;\n# 2 - escape single quote by backslash;\n# 3 - escape single quote by another single quote only in strings containing variables ( {0} ).\n#\n# "escape_quotes" : 3,\n#\n# Defines whether any special characters (=, :, ! and #) should be escaped by backslash in exported translations.\n# e.g. 0 or 1 (Default is 0)\n# 0 - do not escape special characters\n# 1 - escape special characters by a backslash\n#\n# "escape_special_characters": 0\n#\n#\n# End .properties block\n#\n#\n# Often software projects have custom names for the directories where translations are placed. crowdin-cli allows you to map your own languages to be understandable by Crowdin.\n#\n#"languages_mapping" : {\n#  "two_letters_code" : {\n#    "crowdin_language_code" : "local_name"\n#   }\n#},\n#\n# Does the first line contain header?\n# e.g. true or false\n#\n#"first_line_contains_header" : true,\n#\n# for spreadsheets\n# e.g. "identifier,source_phrase,context,uk,ru,fr"\n#\n# "scheme" : "",\n'},48620:function(e,t,n){"use strict";t.Z=n.p+"assets/images/crowdin-create-project-2fe25e5974adc027f7ac2c36f1717de1.png"},82500:function(e,t,n){"use strict";t.Z=n.p+"assets/images/crowdin-download-translations-warning-cb747bdcfc38beabea491f63781b9b40.png"},38076:function(e,t,n){"use strict";t.Z=n.p+"assets/images/crowdin-files-rename-5ff9bf66f6123800006cf38ead6b66ae.png"},95285:function(e,t,n){"use strict";t.Z=n.p+"assets/images/crowdin-french-translations-4f252e7f63a781628378eeb3a9fefb39.png"},54511:function(e,t,n){"use strict";t.Z=n.p+"assets/images/crowdin-hide-string-5e470a33a42e044379bf6860ff534b50.png"},80619:function(e,t,n){"use strict";t.Z=n.p+"assets/images/crowdin-settings-duplicate-strings-6943e2e4cab8910625a0b6c285052726.png"},69878:function(e,t,n){"use strict";t.Z=n.p+"assets/images/crowdin-source-files-0ba8c0433421141418462c3bf6de22ed.png"},59994:function(e,t,n){"use strict";t.Z=n.p+"assets/images/crowdin-translate-json-39a6b98aa60a84eba22b2f5834cbb97d.png"},29217:function(e,t,n){"use strict";t.Z=n.p+"assets/images/crowdin-translate-markdown-0651cd22b5f07f0e9b3031ffaebbc5b6.png"},26593:function(e,t,n){"use strict";t.Z=n.p+"assets/images/crowdin-upload-sources-cli-5758c2f4d4256ac05d21b637d1d517bb.png"}}]);